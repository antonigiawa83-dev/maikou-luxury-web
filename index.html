
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maikou Luxury Protocol</title>
    
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        body { background-color: #050505; color: #d4af37; font-family: 'Times New Roman', serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; text-align: center; }
        .container { border: 1px solid rgba(212, 175, 55, 0.3); padding: 30px; border-radius: 2px; background: linear-gradient(145deg, #0a0a0a, #111); max-width: 400px; width: 100%; box-shadow: 0 0 50px rgba(0,0,0,1); }
        h1 { letter-spacing: 5px; text-transform: uppercase; background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        #reader { width: 100%; margin-top: 20px; border: 1px solid #d4af37; display: none; }
        input { background: transparent; border: none; border-bottom: 1px solid #d4af37; color: white; padding: 10px; width: 80%; text-align: center; margin: 20px 0; outline: none; font-size: 1.1rem; }
        .btn-group { display: flex; flex-direction: column; gap: 10px; }
        button { background: transparent; color: #d4af37; border: 1px solid #d4af37; padding: 12px; cursor: pointer; letter-spacing: 2px; transition: 0.4s; font-weight: bold; }
        button:hover { background: #d4af37; color: black; }
        
        /* Sertifikat - Dioptimasi untuk PDF Hitam */
        #certificate { 
            display: none; 
            margin-top: 30px; 
            padding: 30px; 
            border: 8px double #d4af37; 
            background-color: #0a0a0a; /* Sekarang Hitam */
            color: #d4af37; /* Tulisan jadi Emas */
            animation: goldGlow 1.5s ease-out; 
        }
        
        #error-msg { display: none; margin-top: 20px; color: #ff4d4d; font-weight: bold; border: 1px solid #ff4d4d; padding: 10px; }
        
        #history-section { margin-top: 30px; width: 100%; max-width: 400px; display: none; }
        table { width: 100%; border-collapse: collapse; font-size: 0.7rem; color: #d4af37; border: 1px solid rgba(212, 175, 55, 0.3); }
        th, td { padding: 8px; border: 1px solid rgba(212, 175, 55, 0.2); }

        @keyframes goldGlow { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="container">
        <h1>MAIKOU</h1>
        <p style="font-style: italic; font-size: 0.8rem; opacity: 0.6;">Blockchain-Back End Verification</p>

        <div id="reader"></div>
        <input type="text" id="serial" placeholder="Enter Serial Code...">

        <div class="btn-group">
            <button onclick="startScan()">SCAN QR CODE</button>
            <button onclick="verifyProcess()">VERIFY AUTHENTICITY</button>
        </div>

        <div id="error-msg">INVALID SERIAL: COUNTERFEIT DETECTED</div>

        <div id="certificate">
            <h2 style="margin:0; letter-spacing: 3px;">CERTIFICATE</h2>
            <p style="font-size: 0.7rem; letter-spacing: 2px;">AUTHENTICITY GUARANTEED</p>
            <hr color="#d4af37" style="margin: 15px 0;">
            <p style="font-size: 0.8rem;">Validated Asset:</p>
            <h3 id="cert-id" style="color: #fcf6ba; margin: 5px 0; font-size: 1.5rem;"></h3>
            <p style="font-size: 0.9rem;">Genuine Maikou Luxury Item</p>
            <div style="margin-top: 30px; font-family: cursive; border-top: 1px solid rgba(212,175,55,0.3); padding-top: 10px;">Maikou Digital Seal</div>
            
            <button id="downloadBtn" onclick="downloadPDF()" style="margin-top: 25px; width: 100%; font-size: 0.7rem; border-color: #d4af37; color: #d4af37;">DOWNLOAD OFFICIAL PDF</button>
        </div>
    </div>

    <div id="history-section">
        <h3 style="font-size: 0.8rem; letter-spacing: 2px;">VERIFICATION LOGS</h3>
        <table>
            <thead>
                <tr><th>TIME</th><th>SERIAL</th><th>STATUS</th></tr>
            </thead>
            <tbody id="history-body"></tbody>
        </table>
    </div>

    <audio id="soundSuccess" src="https://www.soundjay.com/buttons/sounds/button-37a.mp3"></audio>
    <audio id="soundFail" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

    <script>
        const validSerials = ["MK-GOLD-001", "MK-SILVER-99", "MK-CHRONO-2026", "ANTONI-DEV"];
        let html5QrCode;

        function startScan() {
            document.getElementById('reader').style.display = 'block';
            html5QrCode = new Html5Qrcode("reader");
            html5QrCode.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, (text) => {
                document.getElementById('serial').value = text;
                html5QrCode.stop();
                document.getElementById('reader').style.display = 'none';
                verifyProcess();
            }).catch(err => alert("Camera error: " + err));
        }

        function updateHistory(serial, isSuccess) {
            document.getElementById('history-section').style.display = 'block';
            const body = document.getElementById('history-body');
            const row = body.insertRow(0);
            const now = new Date().toLocaleTimeString();
            row.innerHTML = `<td>${now}</td><td>${serial}</td><td style="color:${isSuccess?'#0f0':'#f44'}">${isSuccess?'GENUINE':'FAKE'}</td>`;
        }

        function verifyProcess() {
            const input = document.getElementById('serial').value.toUpperCase();
            if(!input) return;
            const cert = document.getElementById('certificate');
            const error = document.getElementById('error-msg');
            
            cert.style.display = "none";
            error.style.display = "none";

            if (validSerials.includes(input)) {
                document.getElementById('soundSuccess').play();
                document.getElementById('cert-id').innerText = input;
                cert.style.display = 'block';
                updateHistory(input, true);
            } else {
                document.getElementById('soundFail').play();
                error.style.display = 'block';
                updateHistory(input, false);
            }
        }

        function downloadPDF() {
            const element = document.getElementById('certificate');
            const btn = document.getElementById('downloadBtn');
            btn.style.display = 'none'; 

            const opt = {
                margin: 0,
                filename: 'Maikou_Official_Cert_' + document.getElementById('cert-id').innerText + '.pdf',
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { 
                    scale: 3, 
                    backgroundColor: '#0a0a0a', // Memastikan background PDF hitam
                    useCORS: true 
                },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            html2pdf().set(opt).from(element).save().then(() => {
                btn.style.display = 'block';
            });
        }
    </script>
</body>
</html>
